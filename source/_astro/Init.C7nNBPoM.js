import{j as e}from"./jsx-runtime.CRkqtJS5.js";import{r as s}from"./index.B52nOzfP.js";import{T as O,I as P}from"./SvgIcons.TWd2scc6.js";import{u as N}from"./index.CUIWiGkV.js";import{i as v,r as y}from"./rootLayoutStore.iSVMtIyF.js";import"./index.BSdFiPHn.js";function G(){const w=N(v);N(y);const[r,h]=s.useState(0),[I,S]=s.useState(!1),[u,A]=s.useState(!1),[d,E]=s.useState(!1),[g,C]=s.useState(!1),o="rgb(164,164,164)",T="#61cefa",k="#61cefa";s.useState(new Set);const[c,p]=s.useState(new Set),a=s.useRef(null),[b,R]=s.useState(!0),f=s.useRef(null),m=s.useCallback(()=>{h(t=>Math.min(t+.5,80))},[]),x=s.useCallback(()=>{a.current&&(a.current.disconnect(),a.current=null,R(!1))},[]);return s.useEffect(()=>{if(!b)return;const t=new PerformanceObserver(n=>{n.getEntries().forEach(i=>{if(i.entryType==="resource"){const l=i.name;c.has(l)||(p($=>new Set($).add(l)),m(),l.endsWith("/images/index-bg.jpg")&&(v.set(!0),x()))}})});return a.current=t,t.observe({entryTypes:["resource"]}),(()=>{performance.getEntriesByType("resource").forEach(i=>{c.has(i.name)||(p(l=>new Set(l).add(i.name)),m(),i.name.endsWith("/images/index-bg.jpg")&&(v.set(!0),x()))})})(),()=>{a.current&&a.current.disconnect()}},[m,c,x,b]),s.useEffect(()=>{let t;return w&&r<100&&(t=window.setInterval(()=>{h(j=>{const n=j+100;return n>=100?(window.clearInterval(t),100):n})},50)),()=>window.clearInterval(t)},[w,r]),s.useEffect(()=>{r>=100&&!g&&(C(!0),setTimeout(()=>{y.set(!0),E(!0),setTimeout(()=>{S(!0)},800)},500))},[r,g]),s.useEffect(()=>{f.current&&(f.current.scrollTop=f.current.scrollHeight)},[c]),I?null:e.jsxs("div",{className:`fixed inset-0 bg-[#272727] flex flex-col items-center justify-center z-50 font-benderBold transition-opacity duration-1000 ${d?"opacity-0":"opacity-100"}`,children:[e.jsx("div",{className:`absolute left-0 right-0 h-[0.05vw] bg-[#686767] transition-all duration-1000 ease-in-out ${d?"top-[-5vw]":"top-[5vw]"}`}),e.jsx("div",{className:`absolute top-0 bottom-0 w-[0.05vw] bg-[#686767] transition-all duration-1000 ease-in-out ${d?"right-[-5vw]":"right-[5vw]"}`}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[e.jsx("div",{className:"flex-grow"}),e.jsx("div",{className:"flex items-center justify-center mb-[2vw]",children:e.jsx(O,{className:"w-[13vw] h-[17vw] max-w-full text-[rgb(164,164,164)]"})}),e.jsx("div",{className:"flex-grow"}),e.jsx("div",{className:"w-full max-w-[90vw] px-[2vw] absolute",style:{top:"75%"},children:e.jsxs("div",{className:`flex items-start ${u?"flex-col":""}`,children:[e.jsx("div",{className:`whitespace-nowrap ${u?"fixed bottom-[1%] left-[1%] text-[10px]":"mr-[15vw] text-[1.2vw]"}`,style:{color:o},children:e.jsx("span",{children:"Â© YUE_PLUS"})}),e.jsxs("div",{className:`flex-grow ${u?"w-full":""} pl-[5vw] pr-[5.5vw]`,children:[e.jsxs("div",{className:"relative h-[0.3vw] flex items-center",style:{backgroundColor:"transparent"},children:[e.jsx("div",{className:"absolute left-0 w-[0.3vw] h-[0.3vw]",style:{backgroundColor:o}}),e.jsx("div",{className:"absolute right-0 w-[0.3vw] h-[0.3vw]",style:{backgroundColor:o}}),e.jsx("div",{className:"absolute top-[0.1vw] left-0 right-0 h-[0.1vw]",style:{backgroundColor:o}}),e.jsx("div",{className:"absolute top-0 left-0 h-[0.3vw] transition-all duration-300 ease-linear",style:{width:`${r}%`,backgroundColor:k}})]}),e.jsxs("div",{className:"flex justify-between items-center mt-[0.8vw]",children:[e.jsxs("div",{className:"flex items-center text-[0.8vw]",style:{color:T},children:[e.jsx(P,{className:"w-[0.8vw] h-[0.8vw] mr-[0.4vw]"}),e.jsx("span",{children:`LOADING - ${Math.round(r)}%`})]}),e.jsxs("div",{className:"flex items-center text-[0.8vw]",style:{color:o},children:[e.jsx("span",{children:"ARKNIGHTS"}),e.jsx("span",{className:"mx-[0.8vw]",children:"//"}),e.jsx("span",{children:"https://github.com/Yue-plus/astro-arknights"})]})]})]})]})}),e.jsx("div",{className:"flex-grow"})]})]})}export{G as Init};