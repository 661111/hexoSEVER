script(type='text/javascript')
  | /* switchDarkMode JS */
  | function switchDarkMode() { // Switch Between Light And Dark Mode
  |   const nowMode = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
  |   if (nowMode === 'light') {
  |     activateDarkMode();
  |     saveToLocal.set('theme', 'dark', 2);
  |     GLOBAL_CONFIG.Snackbar!== undefined && btf.snackbarShow(GLOBAL_CONFIG.Snackbar.day_to_night);
  |   } else {
  |     activateLightMode();
  |     saveToLocal.set('theme', 'light', 2);
  |     GLOBAL_CONFIG.Snackbar!== undefined && btf.snackbarShow(GLOBAL_CONFIG.Snackbar.night_to_day);
  |   }
  |   // handle some cases
  |   typeof utterancesTheme === 'function' && utterancesTheme();
  |   typeof FB === 'object' && window.loadFBComment();
  |   window.DISQUS && document.getElementById('disqus_thread').children.length && setTimeout(() => window.disqusReset(), 200);
  | } 
script(type='text/javascript')
  | document.addEventListener('DOMContentLoaded', function () {
  |   const posts = document.querySelectorAll('#post-info');
  |   posts.forEach(function (post) {
  |       const cover = post.getAttribute('data-cover');
  |       if (cover) {
  |           post.style.backgroundImage = `url(${cover})`;
  |       }
  |   });
  | });
script(type='text/javascript')
  | if ('serviceWorker' in navigator)
  |   window.addEventListener('load', () => {
  |     navigator.serviceWorker.register('/service-worker.js')
  |      .then(registration => {
  |         console.log('Service Worker registered with scope:', registration.scope);
  |       })
  |      .catch(error => {
  |         console.error('Service Worker registration failed:', error);
  |       });
  |   });
script(type="text/javascript")
  | function loadComment() {
  |   // 插入 script 标签
  | }
  | if ('IntersectionObserver' in window) {
  |   const observer = new IntersectionObserver(function (entries) {
  |     // 浏览器视口与监听的元素有交集时会触发该回调
  |     if (entries[0].isIntersecting) {
  |       // 触发 JS 加载
  |       loadComment();
  |       // 取消监听，避免重复触发这个回调
  |       observer.disconnect();
  |     }
  |   }, {
  |     // 回调触发的阈值，这里是 10% 的部分出现在屏幕中时会触发以上的回调
  |     threshold: [0.1],
  |   });
  |   observer.observe(document.getElementById('comment'));
  | } else {
  |   // 浏览器不支持 IntersectionObserver，立即触发 JS 加载
  |   loadComment();
  | }